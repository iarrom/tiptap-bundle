(function(h,s){typeof exports=="object"&&typeof module<"u"?s(exports,require("react"),require("@mantine/core"),require("@tiptap/react"),require("@tippyjs/react"),require("tippy.js"),require("lodash"),require("@blocknote/core")):typeof define=="function"&&define.amd?define(["exports","react","@mantine/core","@tiptap/react","@tippyjs/react","tippy.js","lodash","@blocknote/core"],s):(h=typeof globalThis<"u"?globalThis:h||self,s(h["blocknote-react"]={},h.React,h.core,h.react,h.Tippy,h.tippy_js,h._,h.core$1))})(this,function(h,s,f,Z,Ht,Bt,_t,H){"use strict";const ke=e=>e&&typeof e=="object"&&"default"in e?e:{default:e};function It(e){if(e&&typeof e=="object"&&"default"in e)return e;const r=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(e){for(const o in e)if(o!=="default"){const i=Object.getOwnPropertyDescriptor(e,o);Object.defineProperty(r,o,i.get?i:{enumerable:!0,get:()=>e[o]})}}return r.default=e,Object.freeze(r)}const A=ke(s),V=ke(Ht),Ce=It(_t);var ie={exports:{}},$={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Se;function Rt(){if(Se)return $;Se=1;var e=A.default,r=Symbol.for("react.element"),o=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,c=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function d(g,m,M){var x,j={},B=null,F=null;M!==void 0&&(B=""+M),m.key!==void 0&&(B=""+m.key),m.ref!==void 0&&(F=m.ref);for(x in m)i.call(m,x)&&!l.hasOwnProperty(x)&&(j[x]=m[x]);if(g&&g.defaultProps)for(x in m=g.defaultProps,m)j[x]===void 0&&(j[x]=m[x]);return{$$typeof:r,type:g,key:B,ref:F,props:j,_owner:c.current}}return $.Fragment=o,$.jsx=d,$.jsxs=d,$}var G={};/**
 * @license React
 * react-jsx-runtime.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Te;function At(){return Te||(Te=1,process.env.NODE_ENV!=="production"&&function(){var e=A.default,r=Symbol.for("react.element"),o=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),c=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),d=Symbol.for("react.provider"),g=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),M=Symbol.for("react.suspense"),x=Symbol.for("react.suspense_list"),j=Symbol.for("react.memo"),B=Symbol.for("react.lazy"),F=Symbol.for("react.offscreen"),it=Symbol.iterator,wn="@@iterator";function pn(t){if(t===null||typeof t!="object")return null;var a=it&&t[it]||t[wn];return typeof a=="function"?a:null}var W=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function p(t){{for(var a=arguments.length,u=new Array(a>1?a-1:0),v=1;v<a;v++)u[v-1]=arguments[v];zn("error",t,u)}}function zn(t,a,u){{var v=W.ReactDebugCurrentFrame,C=v.getStackAddendum();C!==""&&(a+="%s",u=u.concat([C]));var S=u.map(function(y){return String(y)});S.unshift("Warning: "+a),Function.prototype.apply.call(console[t],console,S)}}var Hn=!1,Bn=!1,_n=!1,In=!1,Rn=!1,at;at=Symbol.for("react.module.reference");function An(t){return!!(typeof t=="string"||typeof t=="function"||t===i||t===l||Rn||t===c||t===M||t===x||In||t===F||Hn||Bn||_n||typeof t=="object"&&t!==null&&(t.$$typeof===B||t.$$typeof===j||t.$$typeof===d||t.$$typeof===g||t.$$typeof===m||t.$$typeof===at||t.getModuleId!==void 0))}function Pn(t,a,u){var v=t.displayName;if(v)return v;var C=a.displayName||a.name||"";return C!==""?u+"("+C+")":u}function lt(t){return t.displayName||"Context"}function P(t){if(t==null)return null;if(typeof t.tag=="number"&&p("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case i:return"Fragment";case o:return"Portal";case l:return"Profiler";case c:return"StrictMode";case M:return"Suspense";case x:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case g:var a=t;return lt(a)+".Consumer";case d:var u=t;return lt(u._context)+".Provider";case m:return Pn(t,t.render,"ForwardRef");case j:var v=t.displayName||null;return v!==null?v:P(t.type)||"Memo";case B:{var C=t,S=C._payload,y=C._init;try{return P(y(S))}catch{return null}}}return null}var U=Object.assign,J=0,ct,st,ut,dt,ft,gt,ht;function vt(){}vt.__reactDisabledLog=!0;function On(){{if(J===0){ct=console.log,st=console.info,ut=console.warn,dt=console.error,ft=console.group,gt=console.groupCollapsed,ht=console.groupEnd;var t={configurable:!0,enumerable:!0,value:vt,writable:!0};Object.defineProperties(console,{info:t,log:t,warn:t,error:t,group:t,groupCollapsed:t,groupEnd:t})}J++}}function Dn(){{if(J--,J===0){var t={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:U({},t,{value:ct}),info:U({},t,{value:st}),warn:U({},t,{value:ut}),error:U({},t,{value:dt}),group:U({},t,{value:ft}),groupCollapsed:U({},t,{value:gt}),groupEnd:U({},t,{value:ht})})}J<0&&p("disabledDepth fell below zero. This is a bug in React. Please file an issue.")}}var fe=W.ReactCurrentDispatcher,ge;function ee(t,a,u){{if(ge===void 0)try{throw Error()}catch(C){var v=C.stack.trim().match(/\n( *(at )?)/);ge=v&&v[1]||""}return`
`+ge+t}}var he=!1,te;{var Ln=typeof WeakMap=="function"?WeakMap:Map;te=new Ln}function mt(t,a){if(!t||he)return"";{var u=te.get(t);if(u!==void 0)return u}var v;he=!0;var C=Error.prepareStackTrace;Error.prepareStackTrace=void 0;var S;S=fe.current,fe.current=null,On();try{if(a){var y=function(){throw Error()};if(Object.defineProperty(y.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(y,[])}catch(O){v=O}Reflect.construct(t,[],y)}else{try{y.call()}catch(O){v=O}t.call(y.prototype)}}else{try{throw Error()}catch(O){v=O}t()}}catch(O){if(O&&v&&typeof O.stack=="string"){for(var b=O.stack.split(`
`),z=v.stack.split(`
`),E=b.length-1,w=z.length-1;E>=1&&w>=0&&b[E]!==z[w];)w--;for(;E>=1&&w>=0;E--,w--)if(b[E]!==z[w]){if(E!==1||w!==1)do if(E--,w--,w<0||b[E]!==z[w]){var _=`
`+b[E].replace(" at new "," at ");return t.displayName&&_.includes("<anonymous>")&&(_=_.replace("<anonymous>",t.displayName)),typeof t=="function"&&te.set(t,_),_}while(E>=1&&w>=0);break}}}finally{he=!1,fe.current=S,Dn(),Error.prepareStackTrace=C}var Y=t?t.displayName||t.name:"",zt=Y?ee(Y):"";return typeof t=="function"&&te.set(t,zt),zt}function Fn(t,a,u){return mt(t,!1)}function Vn(t){var a=t.prototype;return!!(a&&a.isReactComponent)}function ne(t,a,u){if(t==null)return"";if(typeof t=="function")return mt(t,Vn(t));if(typeof t=="string")return ee(t);switch(t){case M:return ee("Suspense");case x:return ee("SuspenseList")}if(typeof t=="object")switch(t.$$typeof){case m:return Fn(t.render);case j:return ne(t.type,a,u);case B:{var v=t,C=v._payload,S=v._init;try{return ne(S(C),a,u)}catch{}}}return""}var re=Object.prototype.hasOwnProperty,xt={},bt=W.ReactDebugCurrentFrame;function oe(t){if(t){var a=t._owner,u=ne(t.type,t._source,a?a.type:null);bt.setExtraStackFrame(u)}else bt.setExtraStackFrame(null)}function Nn(t,a,u,v,C){{var S=Function.call.bind(re);for(var y in t)if(S(t,y)){var b=void 0;try{if(typeof t[y]!="function"){var z=Error((v||"React class")+": "+u+" type `"+y+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof t[y]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw z.name="Invariant Violation",z}b=t[y](a,y,v,u,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(E){b=E}b&&!(b instanceof Error)&&(oe(C),p("%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",v||"React class",u,y,typeof b),oe(null)),b instanceof Error&&!(b.message in xt)&&(xt[b.message]=!0,oe(C),p("Failed %s type: %s",u,b.message),oe(null))}}}var Un=Array.isArray;function ve(t){return Un(t)}function Wn(t){{var a=typeof Symbol=="function"&&Symbol.toStringTag,u=a&&t[Symbol.toStringTag]||t.constructor.name||"Object";return u}}function qn(t){try{return yt(t),!1}catch{return!0}}function yt(t){return""+t}function kt(t){if(qn(t))return p("The provided key is an unsupported type %s. This value must be coerced to a string before before using it here.",Wn(t)),yt(t)}var X=W.ReactCurrentOwner,Yn={key:!0,ref:!0,__self:!0,__source:!0},Ct,St,me;me={};function $n(t){if(re.call(t,"ref")){var a=Object.getOwnPropertyDescriptor(t,"ref").get;if(a&&a.isReactWarning)return!1}return t.ref!==void 0}function Gn(t){if(re.call(t,"key")){var a=Object.getOwnPropertyDescriptor(t,"key").get;if(a&&a.isReactWarning)return!1}return t.key!==void 0}function Kn(t,a){if(typeof t.ref=="string"&&X.current&&a&&X.current.stateNode!==a){var u=P(X.current.type);me[u]||(p('Component "%s" contains the string ref "%s". Support for string refs will be removed in a future major release. This case cannot be automatically converted to an arrow function. We ask you to manually fix this case by using useRef() or createRef() instead. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-string-ref',P(X.current.type),t.ref),me[u]=!0)}}function Jn(t,a){{var u=function(){Ct||(Ct=!0,p("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",a))};u.isReactWarning=!0,Object.defineProperty(t,"key",{get:u,configurable:!0})}}function Xn(t,a){{var u=function(){St||(St=!0,p("%s: `ref` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",a))};u.isReactWarning=!0,Object.defineProperty(t,"ref",{get:u,configurable:!0})}}var Zn=function(t,a,u,v,C,S,y){var b={$$typeof:r,type:t,key:a,ref:u,props:y,_owner:S};return b._store={},Object.defineProperty(b._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(b,"_self",{configurable:!1,enumerable:!1,writable:!1,value:v}),Object.defineProperty(b,"_source",{configurable:!1,enumerable:!1,writable:!1,value:C}),Object.freeze&&(Object.freeze(b.props),Object.freeze(b)),b};function Qn(t,a,u,v,C){{var S,y={},b=null,z=null;u!==void 0&&(kt(u),b=""+u),Gn(a)&&(kt(a.key),b=""+a.key),$n(a)&&(z=a.ref,Kn(a,C));for(S in a)re.call(a,S)&&!Yn.hasOwnProperty(S)&&(y[S]=a[S]);if(t&&t.defaultProps){var E=t.defaultProps;for(S in E)y[S]===void 0&&(y[S]=E[S])}if(b||z){var w=typeof t=="function"?t.displayName||t.name||"Unknown":t;b&&Jn(y,w),z&&Xn(y,w)}return Zn(t,b,z,C,v,X.current,y)}}var xe=W.ReactCurrentOwner,Tt=W.ReactDebugCurrentFrame;function q(t){if(t){var a=t._owner,u=ne(t.type,t._source,a?a.type:null);Tt.setExtraStackFrame(u)}else Tt.setExtraStackFrame(null)}var be;be=!1;function ye(t){return typeof t=="object"&&t!==null&&t.$$typeof===r}function Mt(){{if(xe.current){var t=P(xe.current.type);if(t)return`

Check the render method of \``+t+"`."}return""}}function er(t){{if(t!==void 0){var a=t.fileName.replace(/^.*[\\\/]/,""),u=t.lineNumber;return`

Check your code at `+a+":"+u+"."}return""}}var jt={};function tr(t){{var a=Mt();if(!a){var u=typeof t=="string"?t:t.displayName||t.name;u&&(a=`

Check the top-level render call using <`+u+">.")}return a}}function Et(t,a){{if(!t._store||t._store.validated||t.key!=null)return;t._store.validated=!0;var u=tr(a);if(jt[u])return;jt[u]=!0;var v="";t&&t._owner&&t._owner!==xe.current&&(v=" It was passed a child from "+P(t._owner.type)+"."),q(t),p('Each child in a list should have a unique "key" prop.%s%s See https://reactjs.org/link/warning-keys for more information.',u,v),q(null)}}function wt(t,a){{if(typeof t!="object")return;if(ve(t))for(var u=0;u<t.length;u++){var v=t[u];ye(v)&&Et(v,a)}else if(ye(t))t._store&&(t._store.validated=!0);else if(t){var C=pn(t);if(typeof C=="function"&&C!==t.entries)for(var S=C.call(t),y;!(y=S.next()).done;)ye(y.value)&&Et(y.value,a)}}}function nr(t){{var a=t.type;if(a==null||typeof a=="string")return;var u;if(typeof a=="function")u=a.propTypes;else if(typeof a=="object"&&(a.$$typeof===m||a.$$typeof===j))u=a.propTypes;else return;if(u){var v=P(a);Nn(u,t.props,"prop",v,t)}else if(a.PropTypes!==void 0&&!be){be=!0;var C=P(a);p("Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?",C||"Unknown")}typeof a.getDefaultProps=="function"&&!a.getDefaultProps.isReactClassApproved&&p("getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead.")}}function rr(t){{for(var a=Object.keys(t.props),u=0;u<a.length;u++){var v=a[u];if(v!=="children"&&v!=="key"){q(t),p("Invalid prop `%s` supplied to `React.Fragment`. React.Fragment can only have `key` and `children` props.",v),q(null);break}}t.ref!==null&&(q(t),p("Invalid attribute `ref` supplied to `React.Fragment`."),q(null))}}function pt(t,a,u,v,C,S){{var y=An(t);if(!y){var b="";(t===void 0||typeof t=="object"&&t!==null&&Object.keys(t).length===0)&&(b+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.");var z=er(C);z?b+=z:b+=Mt();var E;t===null?E="null":ve(t)?E="array":t!==void 0&&t.$$typeof===r?(E="<"+(P(t.type)||"Unknown")+" />",b=" Did you accidentally export a JSX literal instead of a component?"):E=typeof t,p("React.jsx: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s",E,b)}var w=Qn(t,a,u,C,S);if(w==null)return w;if(y){var _=a.children;if(_!==void 0)if(v)if(ve(_)){for(var Y=0;Y<_.length;Y++)wt(_[Y],t);Object.freeze&&Object.freeze(_)}else p("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else wt(_,t)}return t===i?rr(w):nr(w),w}}function or(t,a,u){return pt(t,a,u,!0)}function ir(t,a,u){return pt(t,a,u,!1)}var ar=ir,lr=or;G.Fragment=i,G.jsx=ar,G.jsxs=lr}()),G}process.env.NODE_ENV==="production"?ie.exports=Rt():ie.exports=At();var n=ie.exports;const k=["#FFFFFF","#EFEFEF","#CFCFCF","#AFAFAF","#7F7F7F","#3F3F3F","#1F1F1F","#161616","#0F0F0F","#000000"],Pt=(e=!1)=>{const r=`0px 4px 8px ${e?k[8]:k[2]}, 0px 0px 1px ${e?k[6]:k[1]}`,o=`1px solid ${e?k[7]:k[1]}`,i=e?k[4]:k[2],c=e?k[6]:k[0],l=e?k[7]:k[1],d=e?k[2]:k[5],g=k[4],m=e?k[7]:k[1],M=e?k[2]:k[5],x=e?k[8]:k[5],j=e?k[2]:k[0],B=e?k[7]:k[1],F=e?k[5]:k[3];return{activeStyles:{transform:"none"},colorScheme:e?"dark":"light",colors:{scheme:k,dark:k,textColors:[k[6],"#9b9a97","#64473a","#e03e3e","#d9730d","#dfab01","#4d6461","#0b6e99","#6940a5","#ad1a72"],backgroundColors:[k[0],"#ebeced","#e9e5e3","#fbe4e4","#f6e9d9","#fbf3db","#ddedea","#ddebf1","#eae4f2","#f4dfeb"]},components:{ActionIcon:{styles:()=>({root:{color:i}})},Menu:{styles:()=>({dropdown:{backgroundColor:c,border:o,borderRadius:"6px",boxShadow:r,color:d,padding:"2px",".mantine-Menu-item":{backgroundColor:c,border:"none",color:d},".mantine-Menu-item[data-hovered]":{backgroundColor:m,border:"none",color:M}}})},DragHandleMenu:{styles:()=>({root:{".mantine-Menu-item":{fontSize:"12px",height:"30px"}}})},EditHyperlinkMenu:{styles:()=>({root:{backgroundColor:c,border:o,borderRadius:"6px",boxShadow:r,color:d,gap:"4px",minWidth:"145px",padding:"2px",".mantine-Group-root":{flexWrap:"nowrap",gap:"8px",paddingInline:"6px",".mantine-Container-root":{color:d,display:"flex",justifyContent:"center",padding:0,width:"fit-content"},".mantine-TextInput-root":{width:"300px",".mantine-TextInput-wrapper":{".mantine-TextInput-input":{border:"none",color:d,fontSize:"12px",padding:0}}}}}})},Toolbar:{styles:()=>({root:{backgroundColor:c,boxShadow:r,border:o,borderRadius:"6px",flexWrap:"nowrap",gap:"2px",padding:"2px",width:"fit-content",".mantine-UnstyledButton-root":{backgroundColor:c,border:"none",borderRadius:"4px",color:d},".mantine-UnstyledButton-root:hover":{backgroundColor:m,border:"none",color:M},".mantine-UnstyledButton-root[data-selected]":{backgroundColor:x,border:"none",color:j},".mantine-UnstyledButton-root[data-disabled]":{backgroundColor:B,border:"none",color:F},".mantine-Menu-dropdown":{".mantine-Menu-item":{fontSize:"12px",height:"30px",".mantine-Menu-itemRightSection":{paddingLeft:"5px"}},".mantine-Menu-item:hover":{backgroundColor:m}}}})},Tooltip:{styles:()=>({root:{backgroundColor:c,border:o,borderRadius:"6px",boxShadow:r,color:d,padding:"4px 10px",textAlign:"center","div ~ div":{color:g}}})},SlashMenu:{styles:()=>({root:{position:"relative",".mantine-Menu-item":{".mantine-Menu-itemIcon":{backgroundColor:l,borderRadius:"4px",color:d,padding:"8px"},".mantine-Menu-itemLabel":{paddingRight:"16px",".mantine-Stack-root":{gap:"0"}},".mantine-Menu-itemRightSection":{".mantine-Badge-root":{backgroundColor:l,color:d}}}}})}},fontFamily:"Inter",other:{colors:["default","gray","brown","red","orange","yellow","green","blue","purple","pink"]},primaryColor:"scheme"}},ae=s.forwardRef((e,r)=>{const{classes:o}=f.createStyles({root:{}})(void 0,{name:"Toolbar"});return n.jsx(f.Group,{className:e.className?`${o.root} ${e.className}`:o.root,ref:r,...e,children:e.children})});var Me={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},je=A.default.createContext&&A.default.createContext(Me),D=globalThis&&globalThis.__assign||function(){return D=Object.assign||function(e){for(var r,o=1,i=arguments.length;o<i;o++){r=arguments[o];for(var c in r)Object.prototype.hasOwnProperty.call(r,c)&&(e[c]=r[c])}return e},D.apply(this,arguments)},Ot=globalThis&&globalThis.__rest||function(e,r){var o={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&r.indexOf(i)<0&&(o[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,i=Object.getOwnPropertySymbols(e);c<i.length;c++)r.indexOf(i[c])<0&&Object.prototype.propertyIsEnumerable.call(e,i[c])&&(o[i[c]]=e[i[c]]);return o};function Ee(e){return e&&e.map(function(r,o){return A.default.createElement(r.tag,D({key:o},r.attr),Ee(r.child))})}function T(e){return function(r){return A.default.createElement(Dt,D({attr:D({},e.attr)},r),Ee(e.child))}}function Dt(e){var r=function(o){var i=e.attr,c=e.size,l=e.title,d=Ot(e,["attr","size","title"]),g=c||o.size||"1em",m;return o.className&&(m=o.className),e.className&&(m=(m?m+" ":"")+e.className),A.default.createElement("svg",D({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},o.attr,i,d,{className:m,style:D(D({color:e.color||o.color},o.style),e.style),height:g,width:g,xmlns:"http://www.w3.org/2000/svg"}),l&&A.default.createElement("title",null,l),e.children)};return je!==void 0?A.default.createElement(je.Consumer,null,function(o){return r(o)}):r(Me)}function Lt(e){return T({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M23 12l-7.071 7.071-1.414-1.414L20.172 12l-5.657-5.657 1.414-1.414L23 12zM3.828 12l5.657 5.657-1.414 1.414L1 12l7.071-7.071 1.414 1.414L3.828 12z"}}]}]})(e)}function Ft(e){return T({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M3 4h18v2H3V4zm2 15h14v2H5v-2zm-2-5h18v2H3v-2zm2-5h14v2H5V9z"}}]}]})(e)}function Vt(e){return T({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M3 4h18v2H3V4zm0 15h18v2H3v-2zm0-5h18v2H3v-2zm0-5h18v2H3V9z"}}]}]})(e)}function Nt(e){return T({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M3 4h18v2H3V4zm0 15h14v2H3v-2zm0-5h18v2H3v-2zm0-5h14v2H3V9z"}}]}]})(e)}function Ut(e){return T({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M3 4h18v2H3V4zm4 15h14v2H7v-2zm-4-5h18v2H3v-2zm4-5h14v2H7V9z"}}]}]})(e)}function Wt(e){return T({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M8 11h4.5a2.5 2.5 0 1 0 0-5H8v5zm10 4.5a4.5 4.5 0 0 1-4.5 4.5H6V4h6.5a4.5 4.5 0 0 1 3.256 7.606A4.498 4.498 0 0 1 18 15.5zM8 13v5h5.5a2.5 2.5 0 1 0 0-5H8z"}}]}]})(e)}function we(e){return T({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{},child:[{tag:"path",attr:{fill:"none",d:"M0 0H24V24H0z"}},{tag:"path",attr:{d:"M13 20h-2v-7H4v7H2V4h2v7h7V4h2v16zm8-12v12h-2v-9.796l-2 .536V8.67L19.5 8H21z"}}]}]})(e)}function pe(e){return T({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{},child:[{tag:"path",attr:{fill:"none",d:"M0 0H24V24H0z"}},{tag:"path",attr:{d:"M4 4v7h7V4h2v16h-2v-7H4v7H2V4h2zm14.5 4c2.071 0 3.75 1.679 3.75 3.75 0 .857-.288 1.648-.772 2.28l-.148.18L18.034 18H22v2h-7v-1.556l4.82-5.546c.268-.307.43-.709.43-1.148 0-.966-.784-1.75-1.75-1.75-.918 0-1.671.707-1.744 1.606l-.006.144h-2C14.75 9.679 16.429 8 18.5 8z"}}]}]})(e)}function ze(e){return T({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{},child:[{tag:"path",attr:{fill:"none",d:"M0 0H24V24H0z"}},{tag:"path",attr:{d:"M22 8l-.002 2-2.505 2.883c1.59.435 2.757 1.89 2.757 3.617 0 2.071-1.679 3.75-3.75 3.75-1.826 0-3.347-1.305-3.682-3.033l1.964-.382c.156.806.866 1.415 1.718 1.415.966 0 1.75-.784 1.75-1.75s-.784-1.75-1.75-1.75c-.286 0-.556.069-.794.19l-1.307-1.547L19.35 10H15V8h7zM4 4v7h7V4h2v16h-2v-7H4v7H2V4h2z"}}]}]})(e)}function qt(e){return T({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M3 4h18v2H3V4zm0 15h18v2H3v-2zm8-5h10v2H11v-2zm0-5h10v2H11V9zm-8 3.5L7 9v7l-4-3.5z"}}]}]})(e)}function Yt(e){return T({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M3 4h18v2H3V4zm0 15h18v2H3v-2zm8-5h10v2H11v-2zm0-5h10v2H11V9zm-4 3.5L3 16V9l4 3.5z"}}]}]})(e)}function $t(e){return T({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M15 20H7v-2h2.927l2.116-12H9V4h8v2h-2.927l-2.116 12H15z"}}]}]})(e)}function Gt(e){return T({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M17 17h5v2h-3v3h-2v-5zM7 7H2V5h3V2h2v5zm11.364 8.536L16.95 14.12l1.414-1.414a5 5 0 1 0-7.071-7.071L9.879 7.05 8.464 5.636 9.88 4.222a7 7 0 0 1 9.9 9.9l-1.415 1.414zm-2.828 2.828l-1.415 1.414a7 7 0 0 1-9.9-9.9l1.415-1.414L7.05 9.88l-1.414 1.414a5 5 0 1 0 7.071 7.071l1.414-1.414 1.415 1.414zm-.708-10.607l1.415 1.415-7.071 7.07-1.415-1.414 7.071-7.07z"}}]}]})(e)}function He(e){return T({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M18.364 15.536L16.95 14.12l1.414-1.414a5 5 0 1 0-7.071-7.071L9.879 7.05 8.464 5.636 9.88 4.222a7 7 0 0 1 9.9 9.9l-1.415 1.414zm-2.828 2.828l-1.415 1.414a7 7 0 0 1-9.9-9.9l1.415-1.414L7.05 9.88l-1.414 1.414a5 5 0 1 0 7.071 7.071l1.414-1.414 1.415 1.414zm-.708-10.607l1.415 1.415-7.071 7.07-1.415-1.414 7.071-7.07z"}}]}]})(e)}function Be(e){return T({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M8 4h13v2H8V4zM5 3v3h1v1H3V6h1V4H3V3h2zM3 14v-2.5h2V11H3v-1h3v2.5H4v.5h2v1H3zm2 5.5H3v-1h2V18H3v-1h3v4H3v-1h2v-.5zM8 11h13v2H8v-2zm0 7h13v2H8v-2z"}}]}]})(e)}function _e(e){return T({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M8 4h13v2H8V4zM4.5 6.5a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm0 7a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm0 6.9a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zM8 11h13v2H8v-2zm0 7h13v2H8v-2z"}}]}]})(e)}function Kt(e){return T({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M17.154 14c.23.516.346 1.09.346 1.72 0 1.342-.524 2.392-1.571 3.147C14.88 19.622 13.433 20 11.586 20c-1.64 0-3.263-.381-4.87-1.144V16.6c1.52.877 3.075 1.316 4.666 1.316 2.551 0 3.83-.732 3.839-2.197a2.21 2.21 0 0 0-.648-1.603l-.12-.117H3v-2h18v2h-3.846zm-4.078-3H7.629a4.086 4.086 0 0 1-.481-.522C6.716 9.92 6.5 9.246 6.5 8.452c0-1.236.466-2.287 1.397-3.153C8.83 4.433 10.271 4 12.222 4c1.471 0 2.879.328 4.222.984v2.152c-1.2-.687-2.515-1.03-3.946-1.03-2.48 0-3.719.782-3.719 2.346 0 .42.218.786.654 1.099.436.313.974.562 1.613.75.62.18 1.297.414 2.03.699z"}}]}]})(e)}function le(e){return T({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M13 6v15h-2V6H5V4h14v2z"}}]}]})(e)}function Jt(e){return T({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M8 3v9a4 4 0 1 0 8 0V3h2v9a6 6 0 1 1-12 0V3h2zM4 20h16v2H4v-2z"}}]}]})(e)}function Xt(e){return T({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M10 6v2H5v11h11v-5h2v6a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h6zm11-3v9l-3.794-3.793-5.999 6-1.414-1.414 5.999-6L12 3h9z"}}]}]})(e)}function ce(e){return T({tag:"svg",attr:{version:"1.2",baseProfile:"tiny",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M16.972 6.251c-.967-.538-2.185-.188-2.72.777l-3.713 6.682-2.125-2.125c-.781-.781-2.047-.781-2.828 0-.781.781-.781 2.047 0 2.828l4 4c.378.379.888.587 1.414.587l.277-.02c.621-.087 1.166-.46 1.471-1.009l5-9c.537-.966.189-2.183-.776-2.72z"}}]})(e)}function Zt(e){const r=e.icon;return n.jsx(f.Menu.Item,{onClick:e.onClick,icon:r&&n.jsx(r,{size:16}),rightSection:e.isSelected?n.jsx(ce,{size:16}):n.jsx("div",{style:{width:"16px",padding:"0"}}),disabled:e.isDisabled,children:e.text},e.text)}function Qt(e){return T({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"}}]})(e)}function en(e){return T({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"}}]})(e)}const tn=s.forwardRef((e,r)=>{const o=e.icon;return n.jsx(f.Button,{leftIcon:o&&n.jsx(o,{size:16}),rightIcon:n.jsx(Qt,{}),size:"xs",variant:"subtle",disabled:e.isDisabled,onClick:e.onClick,ref:r,children:e.text})});function Ie(e){const{isSelected:r,...o}=e.items.filter(i=>i.isSelected)[0];return o?n.jsxs(f.Menu,{exitTransitionDuration:0,disabled:e.isDisabled,children:[n.jsx(f.Menu.Target,{children:n.jsx(tn,{text:o.text,icon:o.icon,isDisabled:o.isDisabled})}),n.jsx(f.Menu.Dropdown,{children:e.items.map(i=>n.jsx(Zt,{...i},i.text))})]}):null}function L(e,r){s.useEffect(()=>(e._tiptapEditor.on("selectionUpdate",r),()=>{e._tiptapEditor.off("selectionUpdate",r)}),[r,e._tiptapEditor])}function N(e,r){s.useEffect(()=>(e._tiptapEditor.on("update",r),()=>{e._tiptapEditor.off("update",r)}),[r,e._tiptapEditor])}const nn={1:we,2:pe,3:ze},rn=e=>e.type==="paragraph"||e.type==="heading"&&"level"in e.props||e.type==="bulletListItem"?!0:e.type==="numberedListItem",Re=e=>{const[r,o]=s.useState(e.editor.getTextCursorPosition().block),i=s.useMemo(()=>{const c=[];return"paragraph"in e.editor.schema&&c.push({onClick:()=>{e.editor.focus(),e.editor.updateBlock(r,{type:"paragraph",props:{}})},text:"Paragraph",icon:le,isSelected:r.type==="paragraph"}),"heading"in e.editor.schema&&"level"in e.editor.schema.heading.propSchema&&c.push(...["1","2","3"].map(l=>({onClick:()=>{e.editor.focus(),e.editor.updateBlock(r,{type:"heading",props:{level:l}})},text:"Heading "+l,icon:nn[l],isSelected:r.type==="heading"&&r.props.level===l}))),"bulletListItem"in e.editor.schema&&c.push({onClick:()=>{e.editor.focus(),e.editor.updateBlock(r,{type:"bulletListItem",props:{}})},text:"Bullet List",icon:_e,isSelected:r.type==="bulletListItem"}),"numberedListItem"in e.editor.schema&&c.push({onClick:()=>{e.editor.focus(),e.editor.updateBlock(r,{type:"numberedListItem",props:{}})},text:"Numbered List",icon:Be,isSelected:r.type==="numberedListItem"}),c},[r,e.editor]);return N(e.editor,()=>{o(e.editor.getTextCursorPosition().block)}),L(e.editor,()=>{o(e.editor.getTextCursorPosition().block)}),rn(r)?n.jsx(Ie,{items:i}):null},Ae=e=>{const{classes:r}=f.createStyles({root:{}})(void 0,{name:"Tooltip"});return n.jsxs(f.Stack,{spacing:0,className:r.root,children:[n.jsx(f.Text,{size:"sm",children:e.mainTooltip}),e.secondaryTooltip&&n.jsx(f.Text,{size:"xs",children:e.secondaryTooltip})]})},I=s.forwardRef((e,r)=>{const o=e.icon;return n.jsx(V.default,{content:n.jsx(Ae,{mainTooltip:e.mainTooltip,secondaryTooltip:e.secondaryTooltip}),trigger:"mouseenter",children:e.children?n.jsxs(f.Button,{onClick:e.onClick,"data-selected":e.isSelected?"true":void 0,"data-test":e.mainTooltip.slice(0,1).toLowerCase()+e.mainTooltip.replace(/\s+/g,"").slice(1),size:"xs",disabled:e.isDisabled||!1,ref:r,children:[o&&n.jsx(o,{}),e.children]}):n.jsx(f.ActionIcon,{onClick:e.onClick,"data-selected":e.isSelected?"true":void 0,"data-test":e.mainTooltip.slice(0,1).toLowerCase()+e.mainTooltip.replace(/\s+/g,"").slice(1),size:30,disabled:e.isDisabled||!1,ref:r,children:o&&n.jsx(o,{})})})}),on=()=>typeof navigator<"u"&&(/Mac/.test(navigator.platform)||/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent));function R(e){return on()?e.replace("Mod","⌘"):e.replace("Mod","Ctrl")}const an={bold:"Mod+B",italic:"Mod+I",underline:"Mod+U",strike:"Mod+Shift+X",code:""},ln={bold:Wt,italic:$t,underline:Jt,strike:Kt,code:Lt},K=e=>{const[r,o]=s.useState(e.toggledStyle in e.editor.getActiveStyles());N(e.editor,()=>{o(e.toggledStyle in e.editor.getActiveStyles())}),L(e.editor,()=>{o(e.toggledStyle in e.editor.getActiveStyles())});const i=c=>{e.editor.focus(),e.editor.toggleStyles({[c]:!0})};return n.jsx(I,{onClick:()=>i(e.toggledStyle),isSelected:r,mainTooltip:e.toggledStyle.slice(0,1).toUpperCase()+e.toggledStyle.slice(1),secondaryTooltip:R(an[e.toggledStyle]),icon:ln[e.toggledStyle]})},cn={left:Nt,center:Ft,right:Ut,justify:Vt},Q=e=>{const[r,o]=s.useState(()=>{const l=e.editor.getTextCursorPosition().block;if("textAlignment"in l.props)return l.props.textAlignment});N(e.editor,()=>{const l=e.editor.getTextCursorPosition().block;"textAlignment"in l.props&&o(l.props.textAlignment)}),L(e.editor,()=>{const l=e.editor.getTextCursorPosition().block;"textAlignment"in l.props&&o(l.props.textAlignment)});const i=s.useMemo(()=>{const l=e.editor.getSelection();if(l){for(const d of l.blocks)if(!("textAlignment"in d.props))return!1}else if(!("textAlignment"in e.editor.getTextCursorPosition().block.props))return!1;return!0},[e.editor]),c=s.useCallback(l=>{e.editor.focus();const d=e.editor.getSelection();if(d)for(const g of d.blocks)e.editor.updateBlock(g,{props:{textAlignment:l}});else{const g=e.editor.getTextCursorPosition().block;e.editor.updateBlock(g,{props:{textAlignment:l}})}},[e.editor]);return i?n.jsx(I,{onClick:()=>c(e.textAlignment),isSelected:r===e.textAlignment,mainTooltip:e.textAlignment==="justify"?"Justify Text":"Align Text "+e.textAlignment.slice(0,1).toUpperCase()+e.textAlignment.slice(1),icon:cn[e.textAlignment]}):null},se=e=>{const r=e.textColor||"default",o=e.backgroundColor||"default",i=e.size||16;return n.jsx(f.Box,{sx:c=>({backgroundColor:c.colors.backgroundColors[c.other.colors.indexOf(o)],border:"solid #D3D3D3 1px",borderRadius:(i*.25).toString()+"px",color:c.colors.textColors[c.other.colors.indexOf(r)],fontSize:(i*.75).toString()+"px",height:i.toString()+"px",lineHeight:i.toString()+"px",textAlign:"center",width:i.toString()+"px"}),children:"A"})},Pe=e=>n.jsxs(n.Fragment,{children:[n.jsx(f.Menu.Label,{children:"Text"}),["default","gray","brown","red","orange","yellow","green","blue","purple","pink"].map(r=>n.jsx(f.Menu.Item,{onClick:()=>{e.onClick&&e.onClick(),e.setTextColor(r)},component:"div","data-test":"text-color-"+r,icon:n.jsx(se,{textColor:r,size:e.iconSize}),rightSection:e.textColor===r?n.jsx(ce,{size:16,style:{paddingLeft:"8px"}}):n.jsx("div",{style:{width:"24px",padding:"0"}}),children:r.charAt(0).toUpperCase()+r.slice(1)},"text-color-"+r)),n.jsx(f.Menu.Label,{children:"Background"}),["default","gray","brown","red","orange","yellow","green","blue","purple","pink"].map(r=>n.jsx(f.Menu.Item,{onClick:()=>{e.onClick&&e.onClick(),e.setBackgroundColor(r)},component:"div","data-test":"background-color-"+r,icon:n.jsx(se,{backgroundColor:r,size:e.iconSize}),rightSection:e.backgroundColor===r?n.jsx(ce,{size:16,style:{paddingLeft:"8px"}}):n.jsx("div",{style:{width:"24px",padding:"0"}}),children:r.charAt(0).toUpperCase()+r.slice(1)},"background-color-"+r))]}),Oe=e=>{const[r,o]=s.useState(e.editor.getActiveStyles().textColor||"default"),[i,c]=s.useState(e.editor.getActiveStyles().backgroundColor||"default");N(e.editor,()=>{o(e.editor.getActiveStyles().textColor||"default"),c(e.editor.getActiveStyles().backgroundColor||"default")}),L(e.editor,()=>{o(e.editor.getActiveStyles().textColor||"default"),c(e.editor.getActiveStyles().backgroundColor||"default")});const l=s.useCallback(g=>{e.editor.focus(),g==="default"?e.editor.removeStyles({textColor:g}):e.editor.addStyles({textColor:g})},[e.editor]),d=s.useCallback(g=>{e.editor.focus(),g==="default"?e.editor.removeStyles({backgroundColor:g}):e.editor.addStyles({backgroundColor:g})},[e.editor]);return n.jsxs(f.Menu,{children:[n.jsx(f.Menu.Target,{children:n.jsx(I,{mainTooltip:"Colors",icon:()=>n.jsx(se,{textColor:r,backgroundColor:i,size:20})})}),n.jsx(f.Menu.Dropdown,{children:n.jsx(Pe,{textColor:r,setTextColor:l,backgroundColor:i,setBackgroundColor:d})})]})},De=e=>{const[r,o]=s.useState();N(e.editor,()=>{o(e.editor.canNestBlock())}),L(e.editor,()=>{o(e.editor.canNestBlock())});const i=s.useCallback(()=>{e.editor.focus(),e.editor.nestBlock()},[e.editor]);return n.jsx(I,{onClick:i,isDisabled:!r,mainTooltip:"Nest Block",secondaryTooltip:R("Tab"),icon:Yt})},Le=e=>{const[r,o]=s.useState();N(e.editor,()=>{o(e.editor.canUnnestBlock())}),L(e.editor,()=>{o(e.editor.canUnnestBlock())});const i=s.useCallback(()=>{e.editor.focus(),e.editor.unnestBlock()},[e]);return n.jsx(I,{onClick:i,isDisabled:!r,mainTooltip:"Unnest Block",secondaryTooltip:R("Shift+Tab"),icon:qt})};function sn(e){const r=e.icon;return n.jsx(V.default,{content:n.jsx(Ae,{mainTooltip:e.mainTooltip,secondaryTooltip:e.secondaryTooltip}),placement:"left",children:n.jsx(f.Container,{children:n.jsx(r,{size:16})})})}function un(e){function r(o){o.key==="Enter"&&(o.preventDefault(),e.onSubmit())}return n.jsx(f.TextInput,{autoFocus:e.autofocus,size:"xs",value:e.value,onChange:o=>e.onChange(o.currentTarget.value),onKeyDown:r,placeholder:e.placeholder})}function Fe(e){return n.jsxs(f.Group,{children:[n.jsx(sn,{icon:e.icon,mainTooltip:e.mainIconTooltip,secondaryTooltip:e.secondaryIconTooltip}),n.jsx(un,{autofocus:e.autofocus,placeholder:e.placeholder,value:e.value,onChange:e.onChange,onSubmit:e.onSubmit})]})}const Ve=s.forwardRef(({url:e,text:r,update:o,className:i,...c},l)=>{const{classes:d}=f.createStyles({root:{}})(void 0,{name:"EditHyperlinkMenu"}),[g,m]=s.useState(e),[M,x]=s.useState(r);return n.jsxs(f.Stack,{...c,className:i?`${d.root} ${i}`:d.root,ref:l,children:[n.jsx(Fe,{icon:He,mainIconTooltip:"Edit URL",autofocus:!0,placeholder:"Edit URL",value:g,onChange:j=>m(j),onSubmit:()=>o(g,M)}),n.jsx(Fe,{icon:le,mainIconTooltip:"Edit Title",placeholder:"Edit Title",value:M,onChange:j=>x(j),onSubmit:()=>o(e,M)})]})}),dn=e=>{const[r,o]=s.useState(),[i,c]=s.useState(!1),l=s.useRef(null),d=s.useRef(null),g=s.useCallback(()=>{o(n.jsx(Ve,{url:e.activeHyperlinkUrl,text:e.activeHyperlinkText,update:(M,x)=>{e.setHyperlink(M,x),c(!1)},ref:d},Math.random()+""))},[e]),m=s.useCallback(M=>{var x,j;if((x=l.current)!=null&&x.contains(M.target)){c(!i);return}(j=d.current)!=null&&j.contains(M.target)||c(!1)},[i]);return s.useEffect(()=>(document.body.addEventListener("click",m),()=>document.body.removeEventListener("click",m)),[m]),n.jsx(V.default,{content:r,onShow:g,interactive:!0,maxWidth:500,visible:i,children:n.jsx(I,{isSelected:e.isSelected,mainTooltip:e.mainTooltip,secondaryTooltip:e.secondaryTooltip,icon:e.icon,ref:l})})},Ne=e=>{const[r,o]=s.useState(e.editor.getSelectedLinkUrl()||""),[i,c]=s.useState(e.editor.getSelectedText()||"");L(e.editor,()=>{c(e.editor.getSelectedText()||""),o(e.editor.getSelectedLinkUrl()||"")});const l=s.useCallback((d,g)=>{e.editor.focus(),e.editor.createLink(d,g)},[e.editor]);return n.jsx(dn,{isSelected:!!r,mainTooltip:"Link",secondaryTooltip:R("Mod+K"),icon:He,hyperlinkIsActive:!!r,activeHyperlinkUrl:r,activeHyperlinkText:i,setHyperlink:l})},Ue=e=>n.jsxs(ae,{children:[n.jsx(Re,{...e}),n.jsx(K,{editor:e.editor,toggledStyle:"bold"}),n.jsx(K,{editor:e.editor,toggledStyle:"italic"}),n.jsx(K,{editor:e.editor,toggledStyle:"underline"}),n.jsx(K,{editor:e.editor,toggledStyle:"strike"}),n.jsx(Q,{editor:e.editor,textAlignment:"left"}),n.jsx(Q,{editor:e.editor,textAlignment:"center"}),n.jsx(Q,{editor:e.editor,textAlignment:"right"}),n.jsx(Oe,{editor:e.editor}),n.jsx(De,{editor:e.editor}),n.jsx(Le,{editor:e.editor}),n.jsx(Ne,{editor:e.editor})]}),We=e=>{const[r,o]=s.useState(!1),i=s.useRef();s.useEffect(()=>e.editor.formattingToolbar.onUpdate(d=>{o(d.show),i.current=d.referencePos}),[e.editor]);const c=s.useMemo(()=>{if(i)return()=>i.current},[i.current]),l=s.useMemo(()=>{const d=e.formattingToolbar||Ue;return n.jsx(d,{editor:e.editor})},[e.editor,e.formattingToolbar]);return n.jsx(V.default,{appendTo:e.editor.domElement.parentElement,content:l,getReferenceClientRect:c,interactive:!0,visible:r,animation:"fade",placement:"top-start",sticky:!0,plugins:fn})},fn=[Bt.sticky],gn=e=>{const[r,o]=s.useState(!1),i=s.useRef(null);return r?n.jsx(Ve,{url:e.url,text:e.text,update:(c,l)=>e.editHyperlink(c,l),onBlur:c=>setTimeout(()=>{var l;(l=i.current)!=null&&l.contains(c.relatedTarget)||o(!1)},500),ref:i}):n.jsxs(ae,{onMouseEnter:e.stopHideTimer,onMouseLeave:e.startHideTimer,children:[n.jsx(I,{mainTooltip:"Edit",isSelected:!1,onClick:()=>o(!0),children:"Edit Link"}),n.jsx(I,{mainTooltip:"Open in new tab",isSelected:!1,onClick:()=>{window.open(e.url,"_blank")},icon:Xt}),n.jsx(I,{mainTooltip:"Remove link",isSelected:!1,onClick:e.deleteHyperlink,icon:Gt})]})},qe=e=>{const[r,o]=s.useState(!1),[i,c]=s.useState(),[l,d]=s.useState(),g=s.useRef();s.useEffect(()=>e.editor.hyperlinkToolbar.on("update",x=>{o(x.show),c(x.url),d(x.text),g.current=x.referencePos}),[e.editor]);const m=s.useMemo(()=>{if(g.current)return()=>g.current},[g.current]),M=s.useMemo(()=>{if(!i||!l)return null;const x=e.hyperlinkToolbar||gn;return n.jsx(x,{url:i,text:l,editHyperlink:e.editor.hyperlinkToolbar.editHyperlink,deleteHyperlink:e.editor.hyperlinkToolbar.deleteHyperlink,startHideTimer:e.editor.hyperlinkToolbar.startHideTimer,stopHideTimer:e.editor.hyperlinkToolbar.stopHideTimer})},[e.hyperlinkToolbar,e.editor,l,i]);return n.jsx(V.default,{appendTo:e.editor.domElement.parentElement,content:M,getReferenceClientRect:m,interactive:!0,visible:r,animation:"fade",placement:"top-start"})},Ye=e=>n.jsx(f.Group,{spacing:0,children:e.children});function hn(e){return T({tag:"svg",attr:{t:"1551322312294",style:"",viewBox:"0 0 1024 1024",version:"1.1"},child:[{tag:"defs",attr:{},child:[]},{tag:"path",attr:{d:"M474 152m8 0l60 0q8 0 8 8l0 704q0 8-8 8l-60 0q-8 0-8-8l0-704q0-8 8-8Z"}},{tag:"path",attr:{d:"M168 474m8 0l672 0q8 0 8 8l0 60q0 8-8 8l-672 0q-8 0-8-8l0-60q0-8 8-8Z"}}]})(e)}const ue=e=>n.jsx(f.ActionIcon,{size:24,children:e.children}),$e=e=>n.jsx(ue,{children:n.jsx(hn,{size:24,onClick:e.addBlock,"data-test":"dragHandleAdd"})});function vn(e){return T({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"}},{tag:"path",attr:{d:"M11 18c0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2 2 .9 2 2zm-2-8c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0-6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm6 4c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}}]})(e)}const Ge=e=>{const{classes:r}=f.createStyles({root:{}})(void 0,{name:"DragHandleMenu"});return n.jsx(f.Menu.Dropdown,{className:r.root,children:e.children})},de=e=>{const{children:r,...o}=e;return n.jsx(f.Menu.Item,{...o,children:r})},Ke=e=>n.jsx(de,{onClick:()=>e.editor.removeBlocks([e.block]),children:e.children}),Je=e=>{const[r,o]=s.useState(!1),i=s.useRef(),c=s.useCallback(()=>{i.current&&clearTimeout(i.current),i.current=setTimeout(()=>{o(!1)},250)},[]),l=s.useCallback(()=>{i.current&&clearTimeout(i.current),o(!0)},[]);return!("textColor"in e.block.props)||!("backgroundColor"in e.block.props)?null:n.jsx(de,{onMouseLeave:c,onMouseOver:l,children:n.jsxs(f.Menu,{opened:r,position:"right",children:[n.jsx(f.Menu.Target,{children:n.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[n.jsx("div",{style:{flex:1},children:e.children}),n.jsx(f.Box,{style:{display:"flex",alignItems:"center"},children:n.jsx(en,{size:15})})]})}),n.jsx(f.Menu.Dropdown,{onMouseLeave:c,onMouseOver:l,style:{marginLeft:"5px"},children:n.jsx(Pe,{iconSize:18,textColor:e.block.props.textColor||"default",backgroundColor:e.block.props.backgroundColor||"default",setTextColor:d=>e.editor.updateBlock(e.block,{props:{textColor:d}}),setBackgroundColor:d=>e.editor.updateBlock(e.block,{props:{backgroundColor:d}})})})]})})},Xe=e=>n.jsxs(Ge,{children:[n.jsx(Ke,{...e,children:"Delete"}),n.jsx(Je,{...e,children:"Colors"})]}),Ze=e=>{const r=e.dragHandleMenu||Xe;return n.jsxs(f.Menu,{trigger:"click",onOpen:e.freezeMenu,onClose:e.unfreezeMenu,width:100,position:"left",children:[n.jsx(f.Menu.Target,{children:n.jsx("div",{draggable:"true",onDragStart:e.blockDragStart,onDragEnd:e.blockDragEnd,children:n.jsx(ue,{children:n.jsx(vn,{size:24,"data-test":"dragHandle"})})})}),n.jsx(r,{editor:e.editor,block:e.block})]})},Qe=e=>n.jsxs(Ye,{children:[n.jsx($e,{...e}),n.jsx(Ze,{...e})]}),et=e=>{const[r,o]=s.useState(!1),[i,c]=s.useState(),l=s.useRef();s.useEffect(()=>e.editor.sideMenu.onUpdate(m=>{o(m.show),c(m.block),l.current=m.referencePos}),[e.editor]);const d=s.useMemo(()=>{if(l.current)return()=>l.current},[l.current]),g=s.useMemo(()=>{if(!i)return null;const m=e.sideMenu||Qe;return n.jsx(m,{block:i,editor:e.editor,blockDragStart:e.editor.sideMenu.blockDragStart,blockDragEnd:e.editor.sideMenu.blockDragEnd,addBlock:e.editor.sideMenu.addBlock,freezeMenu:e.editor.sideMenu.freezeMenu,unfreezeMenu:e.editor.sideMenu.unfreezeMenu})},[i,e.editor,e.sideMenu]);return n.jsx(V.default,{appendTo:e.editor.domElement.parentElement,content:g,getReferenceClientRect:d,interactive:!0,visible:r,animation:"fade",offset:mn,placement:"left",popperOptions:xn})},mn=[0,0],xn={modifiers:[{name:"flip",options:{fallbackPlacements:[]}},{name:"preventOverflow",options:{mainAxis:!1,altAxis:!1}}]},bn=5;function tt(e){const r=s.useRef(null),{classes:o}=f.createStyles({root:{}})(void 0,{name:"SuggestionListItem"});function i(){var g;const l=e.isSelected,d=(g=r.current)==null?void 0:g.matches(":hover");return l||d}function c(){var l,d;i()?(l=r.current)==null||l.setAttribute("data-hovered","true"):(d=r.current)==null||d.removeAttribute("data-hovered")}return s.useEffect(()=>{c(),i()&&r.current&&r.current.getBoundingClientRect().left>bn&&r.current.scrollIntoView({behavior:"smooth",block:"nearest"})}),n.jsx(f.Menu.Item,{className:o.root,icon:e.icon,onClick:e.set,closeMenuOnClick:!1,onMouseLeave:()=>{setTimeout(()=>{c()},1)},ref:r,rightSection:e.shortcut&&n.jsx(f.Badge,{size:"xs",children:e.shortcut}),children:n.jsxs(f.Stack,{children:[n.jsx(f.Text,{size:14,weight:500,children:e.name}),n.jsx(f.Text,{size:10,children:e.hint})]})})}function nt(e){const{classes:r}=f.createStyles({root:{}})(void 0,{name:"SlashMenu"}),o=[];let i=0;const c=Ce.groupBy(e.filteredItems,l=>l.group);return Ce.forEach(c,l=>{o.push(n.jsx(f.Menu.Label,{children:l[0].group},l[0].group));for(const d of l)o.push(n.jsx(tt,{name:d.name,icon:d.icon,hint:d.hint,shortcut:d.shortcut,isSelected:e.keyboardHoveredItemIndex===i,set:()=>e.itemCallback(d)},d.name)),i++}),n.jsx(f.Menu,{defaultOpened:!0,trigger:"hover",closeDelay:1e7,children:n.jsx(f.Menu.Dropdown,{onMouseDown:l=>l.preventDefault(),className:r.root,children:o.length>0?o:n.jsx(f.Menu.Item,{children:"No match found"})})})}const rt=e=>{const[r,o]=s.useState(!1),[i,c]=s.useState(),[l,d]=s.useState(),g=s.useRef();s.useEffect(()=>e.editor.slashMenu.onUpdate(x=>{o(x.show),c(x.filteredItems),d(x.keyboardHoveredItemIndex),g.current=x.referencePos}),[e.editor]);const m=s.useMemo(()=>{if(g.current)return()=>g.current},[g.current]),M=s.useMemo(()=>{if(!i||l===void 0)return null;const x=e.slashMenu||nt;return n.jsx(x,{filteredItems:i,itemCallback:j=>e.editor.slashMenu.itemCallback(j),keyboardHoveredItemIndex:l})},[i,l,e.editor.slashMenu,e.slashMenu]);return n.jsx(V.default,{appendTo:e.editor.domElement.parentElement,content:M,getReferenceClientRect:m,interactive:!0,visible:r,animation:"fade",placement:"bottom-start"})};function yn(e){var c;const{editor:r,children:o,...i}=e;return n.jsx(f.MantineProvider,{theme:Pt(),children:n.jsx(Z.EditorContent,{editor:(c=e.editor)==null?void 0:c._tiptapEditor,...i,children:e.children||n.jsxs(n.Fragment,{children:[n.jsx(We,{editor:e.editor}),n.jsx(qe,{editor:e.editor}),n.jsx(rt,{editor:e.editor}),n.jsx(et,{editor:e.editor})]})})})}const kn={Heading:{group:"Headings",icon:n.jsx(we,{size:18}),hint:"Used for a top-level heading",shortcut:R("Mod-Alt-1")},"Heading 2":{group:"Headings",icon:n.jsx(pe,{size:18}),hint:"Used for key sections",shortcut:R("Mod-Alt-2")},"Heading 3":{group:"Headings",icon:n.jsx(ze,{size:18}),hint:"Used for subsections and group headings",shortcut:R("Mod-Alt-3")},"Numbered List":{group:"Basic blocks",icon:n.jsx(Be,{size:18}),hint:"Used to display a numbered list",shortcut:R("Mod-Alt-7")},"Bullet List":{group:"Basic blocks",icon:n.jsx(_e,{size:18}),hint:"Used to display an unordered list",shortcut:R("Mod-Alt-9")},Paragraph:{group:"Basic blocks",icon:n.jsx(le,{size:18}),hint:"Used for the body of your document",shortcut:R("Mod-Alt-0")}};function ot(e=H.defaultBlockSchema){return H.getDefaultSlashMenuItems(e).map(o=>({...o,...kn[o.name]}))}const Cn=e=>new H.BlockNoteEditor({slashMenuItems:ot(e.blockSchema||H.defaultBlockSchema),...e}),Sn=(e={},r=[])=>{const o=s.useRef();return s.useMemo(()=>(o.current&&o.current._tiptapEditor.destroy(),o.current=Cn(e),o.current),r)};function Tn(){const[,e]=s.useState(0);return()=>e(r=>r+1)}const Mn=e=>{const r=Tn();s.useEffect(()=>{const o=()=>{requestAnimationFrame(()=>{requestAnimationFrame(()=>{r()})})};return e.on("transaction",o),()=>{e.off("transaction",o)}},[e])},jn=e=>n.jsx(Z.NodeViewContent,{...e,className:`${e.className?e.className+" ":""}${H.blockStyles.inlineContent}`});function En(e){return{node:H.createTipTapBlock({name:e.type,content:e.containsInlineContent?"inline*":"",selectable:e.containsInlineContent,addOptions(){return{editor:void 0}},addAttributes(){return H.propsToAttributes(e)},parseHTML(){return H.parse(e)},renderHTML({HTMLAttributes:o}){return H.render(e,o)},addNodeView(){const o=i=>{const c=e.render,l={};for(const[B,F]of Object.entries(i.node.attrs))B in e.propSchema&&(l[H.camelToDataKebab(B)]=F);const d=this.options.editor,g=typeof i.getPos=="function"?i.getPos():void 0,x=d._tiptapEditor.state.doc.resolve(g).node().attrs.id,j=d.getBlock(x);if(j.type!==e.type)throw new Error("Block type does not match");return n.jsx(Z.NodeViewWrapper,{className:H.blockStyles.blockContent,"data-content-type":e.type,...l,children:n.jsx(c,{block:j,editor:d})})};return Z.ReactNodeViewRenderer(o,{className:H.blockStyles.reactNodeViewRenderer})}}),propSchema:e.propSchema}}h.AddBlockButton=$e,h.BlockColorsButton=Je,h.BlockNoteView=yn,h.BlockTypeDropdown=Re,h.ColorStyleButton=Oe,h.CreateLinkButton=Ne,h.DefaultDragHandleMenu=Xe,h.DefaultFormattingToolbar=Ue,h.DefaultSideMenu=Qe,h.DefaultSlashMenu=nt,h.DragHandle=Ze,h.DragHandleMenu=Ge,h.DragHandleMenuItem=de,h.FormattingToolbarPositioner=We,h.HyperlinkToolbarPositioner=qe,h.InlineContent=jn,h.NestBlockButton=De,h.RemoveBlockButton=Ke,h.SideMenu=Ye,h.SideMenuButton=ue,h.SideMenuPositioner=et,h.SlashMenuItem=tt,h.SlashMenuPositioner=rt,h.TextAlignButton=Q,h.ToggledStyleButton=K,h.Toolbar=ae,h.ToolbarButton=I,h.ToolbarDropdown=Ie,h.UnnestBlockButton=Le,h.createReactBlockSpec=En,h.getDefaultReactSlashMenuItems=ot,h.useBlockNote=Sn,h.useEditorContentChange=N,h.useEditorForceUpdate=Mn,h.useEditorSelectionChange=L,Object.defineProperty(h,Symbol.toStringTag,{value:"Module"})});
//# sourceMappingURL=blocknote-react.umd.cjs.map
